{"version":3,"sources":["common/Filter.tsx","components/Cards/CardsList.tsx","common/Header.tsx","helpers/util.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["animatedComponents","makeAnimated","Filters","props","Row","className","Col","xs","sm","isMulti","value","filter","name","options","genres","classNamePrefix","placeholder","components","onChange","handleChange","isClearable","isSearchable","releaseYear","CardsList","isLoading","style","textAlign","paddingTop","role","videos","length","slice","cardsCount","map","image_url","artist","title","id","lg","Card","outline","color","maxHeight","CardImg","width","height","objectFit","src","alt","CardBody","CardTitle","tag","CardSubtitle","Header","Navbar","light","expand","Container","NavbarBrand","href","removeDuplicates","data","key","v","i","origArray","findIndex","t","App","useState","setGenres","origVideos","setOrigVideos","setVideos","setReleaseYear","action","setFilter","setIsLoading","error","setError","setCardsCount","useEffect","a","fetch","response","json","label","release_year","console","log","fetchData","genre_id","x","includes","Object","keys","Button","onClick","window","location","reload","Filter","option","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.54b80a4d.chunk.js","sourcesContent":["import { Col, Row } from \"reactstrap\";\nimport Select from \"react-select\";\nimport makeAnimated from \"react-select/animated\";\n\ninterface FilterProps {\n    filter: {action: string};\n    genres: any[];\n    handleChange: (option: any, { action, name }: { action: any; name: any; }) => void;\n    releaseYear: string;\n  }\n\n  const animatedComponents = makeAnimated();\n\nconst Filters = (props : FilterProps) => (\n  <Row className=\"justify-content-center\">\n    <Col xs={12} sm={5} className=\"m-2\">\n      <Select\n        isMulti\n        value={props.filter[\"genre\"]}\n        name=\"genre\"\n        options={props.genres}\n        className=\"basic-multi-select\"\n        classNamePrefix=\"select\"\n        placeholder=\"Select Genres...\"\n        components={animatedComponents}\n        onChange={props.handleChange}\n      />\n    </Col>\n    <Col xs={12} sm={5} className=\"m-2\">\n      <Select\n        value={props.filter[\"RY\"]}\n        className=\"basic-single\"\n        classNamePrefix=\"select\"\n        isClearable={true}\n        isSearchable={true}\n        name=\"RY\"\n        placeholder=\"Select Year...\"\n        options={props.releaseYear}\n        onChange={props.handleChange}\n      />\n    </Col>\n  </Row>\n);\n\nexport default Filters;\n","import {\n  Card,\n  CardImg,\n  CardTitle,\n  CardSubtitle,\n  CardBody,\n  Col,\n  Row\n} from \"reactstrap\";\n\ninterface CardsListProps {\n    isLoading: Boolean;\n    videos: any[];\n    cardsCount: number;\n  }\n\n//Show Cards List\nconst CardsList = (props: CardsListProps) => (\n  <Row>\n    {/* Show Loader */}\n    {props.isLoading ? (\n      <div\n        style={{\n          textAlign: \"center\",\n          paddingTop: \"9rem\"\n        }}\n      >\n        <div className=\"spinner-border\" role=\"status\"></div>\n      </div>\n    ) : props.videos.length === 0 ? (\n      // Handle no data found\n      <div\n        style={{\n          textAlign: \"center\",\n          paddingTop: \"9rem\"\n        }}\n      >\n        No Data Found\n      </div>\n    ) : (\n      //Paginated view of cards\n      props.videos\n        .slice(0, props.cardsCount)\n        .map(({ image_url, artist, title, id }: any) => (\n          <Col sm=\"4\" xs=\"12\" lg=\"3\" key={id}>\n            <Card\n              outline\n              color=\"success\"\n              className=\"m-2 text-center\"\n              style={{ maxHeight: \"20rem\" }}\n            >\n              <CardImg\n                style={{\n                  width: \"100%\",\n                  height: \"50vw\",\n                  objectFit: \"cover\"\n                }}\n                src={image_url}\n                alt={title}\n              />\n              <CardBody>\n                <CardTitle tag=\"h6\">{artist}</CardTitle>\n                <CardSubtitle tag=\"h6\" className=\"mb-2 text-muted\">\n                  {title}\n                </CardSubtitle>\n              </CardBody>\n            </Card>\n          </Col>\n        ))\n    )}\n  </Row>\n);\n\nexport default CardsList;\n","import { Container, Navbar, NavbarBrand } from \"reactstrap\";\n\nconst Header = () => (\n  <Navbar color=\"light\" light expand=\"md\">\n    <Container>\n      <NavbarBrand href=\"/\">My Music App</NavbarBrand>\n    </Container>\n  </Navbar>\n);\n\nexport default Header;\n","//remove duplicates by key in array of objects\nfunction removeDuplicates(data: any[], key: string) {\n  return data.filter(\n    (v: Object, i: Number, origArray: Array<[Object]>) =>\n      origArray.findIndex((t: Object) => t[key] === v[key]) === i\n  );\n}\n\nexport { removeDuplicates };\n","import React, { useState, useEffect } from \"react\";\nimport { Button, Container } from \"reactstrap\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport Filters from \"./common/Filter\";\nimport CardsList from \"./components/Cards/CardsList\";\nimport Header from \"./common/Header\";\nimport { removeDuplicates } from \"./helpers/util\";\n\ninterface IKeys {\n  value: number;\n  label: string;\n}\n\nfunction App() {\n  const [genres, setGenres] = useState([]);\n  const [origVideos, setOrigVideos] = useState([]);\n  const [videos, setVideos] = useState([]);\n  const [releaseYear, setReleaseYear] = useState<any>([]);\n  const [filter, setFilter] = useState({ action: \"\" });\n  const [isLoading, setIsLoading] = useState<Boolean>(false);\n  const [error, setError] = useState<Object>();\n  const [cardsCount, setCardsCount] = useState<number>(12);\n\n  //Handle async api call\n  useEffect(() => {\n    const url =\n      \"https://raw.githubusercontent.com/XiteTV/frontend-coding-exercise/main/data/dataset.json\";\n\n    const fetchData = async () => {\n      try {\n        const response = await fetch(url);\n        setIsLoading(true);\n        const json = await response.json();\n        setIsLoading(false);\n\n        //set genres from dataset for genre filter\n        setGenres(\n          json.genres.map(\n            ({ id, name }) =>\n              ({\n                value: id,\n                label: name\n              } as IKeys)\n          )\n        );\n\n        //set release year from dataset for year filter\n        setReleaseYear(\n          //remove year duplicates\n          removeDuplicates(\n            json.videos.map(\n              ({ release_year }) =>\n                ({\n                  value: release_year,\n                  label: release_year\n                } as IKeys)\n            ),\n            \"value\"\n          )\n        );\n        setVideos(json.videos);\n        setOrigVideos(json.videos);\n      } catch (error) {\n        console.log(\"error\", error);\n        setError(error);\n      }\n    };\n\n    fetchData();\n  }, []);\n\n  //Set Filters in state\n  const handleChange = (option, { action, name }) => {\n    setFilter({ ...filter, action: action, [name]: option });\n  };\n\n  const loadMoreCards = () => {\n    setCardsCount(cardsCount + 12);\n  };\n\n  //Handle different scenarios of filters being set\n  useEffect(() => {\n    //When Genre is set but year is not set\n    if (filter[\"genre\"] && !filter[\"RY\"]) {\n      //When genre is not set\n      !filter[\"genre\"].length\n        ? setVideos(origVideos)\n        : setVideos(\n            origVideos.filter(({ genre_id }: any) =>\n              filter[\"genre\"].map((x: any) => x.value).includes(genre_id)\n            )\n          );\n    }\n    //When Genre is not set but year is set\n    else if (filter[\"RY\"] && !filter[\"genre\"]) {\n      !filter[\"RY\"]\n        ? setVideos(origVideos)\n        : setVideos(\n            origVideos.filter((x: any) => filter[\"RY\"].value === x.release_year)\n          );\n    }\n    //When Genre is not set but year is set.\n    // When user tries to change the year\n    else if (\n      Object.keys(filter).includes(\"RY\") &&\n      !filter[\"genre\"] &&\n      filter.action === \"clear\"\n    ) {\n      setVideos(origVideos);\n    }\n    // When Genre is set and year is not set\n    else if (filter[\"genre\"] && !filter[\"RY\"]) {\n      setVideos(\n        videos.filter((x: any) => filter[\"RY\"].value === x.release_year)\n      );\n    }\n    // When genre and year are both set\n    else if (filter[\"genre\"] && filter[\"RY\"]) {\n      //when genre filter is cleared/not set\n      !filter[\"genre\"].length\n        ? setVideos(\n            origVideos.filter((x: any) => filter[\"RY\"].value === x.release_year)\n          )\n        : setVideos(\n            origVideos.filter(\n              (x: any) =>\n                filter[\"RY\"].value === x.release_year &&\n                filter[\"genre\"].map((x: any) => x.value).includes(x.genre_id)\n            )\n          );\n    }\n  }, [filter]);\n\n  return (\n    <div>\n      <Header />\n      <Container>\n        {/* Show Errors! */}\n        {error ? (\n          <div\n            style={{\n              textAlign: \"center\",\n              paddingTop: \"9rem\"\n            }}\n          >\n            Error!\n            <Button color=\"link\" onClick={() => window.location.reload()}>\n              Refresh Page\n            </Button>\n          </div>\n        ) : (\n          <>\n            <Filters\n              filter={filter}\n              genres={genres}\n              handleChange={handleChange}\n              releaseYear={releaseYear}\n            />\n            <CardsList\n              isLoading={isLoading}\n              videos={videos}\n              cardsCount={cardsCount}\n            />\n            {videos.length > cardsCount && (\n              <div style={{ textAlign: \"center\" }}>\n                <Button color=\"link\" onClick={loadMoreCards}>\n                  Load More...\n                </Button>\n              </div>\n            )}\n          </>\n        )}\n      </Container>\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}